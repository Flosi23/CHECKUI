import{r}from"./index-caxmlYbZ.js";import{r as N}from"./index-BmNgusFo.js";import{b as S,_ as C,$ as A}from"./index-C56Ec2w9.js";function w(e,n){const t=r.createContext(n);function o(s){const{children:i,...a}=s,f=r.useMemo(()=>a,Object.values(a));return r.createElement(t.Provider,{value:f},i)}function c(s){const i=r.useContext(t);if(i)return i;if(n!==void 0)return n;throw new Error(`\`${s}\` must be used within \`${e}\``)}return o.displayName=e+"Provider",[o,c]}function I(e,n=[]){let t=[];function o(s,i){const a=r.createContext(i),f=t.length;t=[...t,i];function u(d){const{scope:l,children:$,...p}=d,x=(l==null?void 0:l[e][f])||a,P=r.useMemo(()=>p,Object.values(p));return r.createElement(x.Provider,{value:P},$)}function m(d,l){const $=(l==null?void 0:l[e][f])||a,p=r.useContext($);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,m]}const c=()=>{const s=t.map(i=>r.createContext(i));return function(a){const f=(a==null?void 0:a[e])||s;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:f}}),[a,f])}};return c.scopeName=e,[o,E(c,...n)]}function E(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const o=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(s){const i=o.reduce((a,{useScope:f,scopeName:u})=>{const d=f(s)[`__scope${u}`];return{...a,...d}},{});return r.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return t.scopeName=n.scopeName,t}function L(e,n,{checkForDefaultPrevented:t=!0}={}){return function(c){if(e==null||e(c),t===!1||!c.defaultPrevented)return n==null?void 0:n(c)}}function b(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e}),r.useMemo(()=>(...t)=>{var o;return(o=n.current)===null||o===void 0?void 0:o.call(n,...t)},[])}function D({prop:e,defaultProp:n,onChange:t=()=>{}}){const[o,c]=M({defaultProp:n,onChange:t}),s=e!==void 0,i=s?e:o,a=b(t),f=r.useCallback(u=>{if(s){const d=typeof u=="function"?u(e):u;d!==e&&a(d)}else c(u)},[s,e,c,a]);return[i,f]}function M({defaultProp:e,onChange:n}){const t=r.useState(e),[o]=t,c=r.useRef(o),s=b(n);return r.useEffect(()=>{c.current!==o&&(s(o),c.current=o)},[o,c,s]),t}const h=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{};function g(e,n){return r.useReducer((t,o)=>{const c=n[t][o];return c??t},e)}const O=e=>{const{present:n,children:t}=e,o=T(n),c=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),s=S(o.ref,c.ref);return typeof t=="function"||o.isPresent?r.cloneElement(c,{ref:s}):null};O.displayName="Presence";function T(e){const[n,t]=r.useState(),o=r.useRef({}),c=r.useRef(e),s=r.useRef("none"),i=e?"mounted":"unmounted",[a,f]=g(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const u=v(o.current);s.current=a==="mounted"?u:"none"},[a]),h(()=>{const u=o.current,m=c.current;if(m!==e){const l=s.current,$=v(u);e?f("MOUNT"):$==="none"||(u==null?void 0:u.display)==="none"?f("UNMOUNT"):f(m&&l!==$?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,f]),h(()=>{if(n){const u=d=>{const $=v(o.current).includes(d.animationName);d.target===n&&$&&N.flushSync(()=>f("ANIMATION_END"))},m=d=>{d.target===n&&(s.current=v(o.current))};return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",u),n.addEventListener("animationend",u),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",u),n.removeEventListener("animationend",u)}}else f("ANIMATION_END")},[n,f]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:r.useCallback(u=>{u&&(o.current=getComputedStyle(u)),t(u)},[])}}function v(e){return(e==null?void 0:e.animationName)||"none"}const y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],k=y.reduce((e,n)=>{const t=r.forwardRef((o,c)=>{const{asChild:s,...i}=o,a=s?A:n;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(a,C({},i,{ref:c}))});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{});function j(e,n){e&&N.flushSync(()=>e.dispatchEvent(n))}export{h as $,I as a,D as b,k as c,L as d,O as e,b as f,j as g,w as h};
